
<script type="text/javascript">
  function openEmbedPopup() {
    var embedMeElement = document.getElementById("embed-me-code-popup");
    embedMeElement.style.visibility = "initial";
  }
  function closeEmbedPopup() {
    var embedMeElement = document.getElementById("embed-me-code-popup");
    embedMeElement.style.visibility = "hidden";
  }
  function copyEmbedCode(inputId) {
    var copyText = document.getElementById(inputId);
    copyText.select();
    copyText.setSelectionRange(0, 99999);
    document.execCommand("copy");
  }
</script>

<style>
  .embed-me-code-popup * {
    box-sizing: border-box;
  }
  .embed-me-code-popup {
    position: absolute;
    width: 100vw;
    height: 100vh;
    top: 0; right: 0; bottom: 0; left: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    visibility: hidden;
  }
  .embed-me-code-popup .embed-me-background {
    background-color: rgba(0,0,0,0.5);
    position: absolute;
    width: 100%;
    height: 100%;
  }
  .embed-me-code-popup .card {
    position: relative;
    display: flex;
    flex-direction: column;
    min-width: 0;
    word-wrap: break-word;
    background-color: #ffffff;
    background-clip: border-box;
    border: 1px solid rgba(0,0,0,.125);
    border-radius: .25rem;
    max-width: 700px;
  }
  .embed-me-code-popup .card-body {
    flex: 1 1 auto;
    padding: 1rem 1rem;
  }
  .embed-me-code-popup .card-title {
    margin-bottom: .5rem;
    font-size: 1.25rem;
    margin-top: 0;
    font-weight: 500;
    line-height: 1.2;
  }
  .embed-me-code-popup .card-text {
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: 1rem;
  }
  .embed-me-code-popup .input-group {
    margin-bottom: 1rem;
    position: relative;
    display: flex;
    flex-wrap: wrap;
    align-items: stretch;
    width: 100%;
  }
  .embed-me-code-popup .input-group>:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }
  .embed-me-code-popup .input-group>:not(:first-child) {
    margin-left: -1px;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }
  .embed-me-code-popup .input-group .embed-me-btn {
    position: relative;
    z-index: 2;
  }
  .embed-me-code-popup .form-control {
    display: block;
    padding: .375rem .75rem;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #212529;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: .25rem;
    transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    margin: 0;
    position: relative;
    flex: 1 1 auto;
    width: 1%;
    min-width: 0;
  }
  .embed-me-code-popup .text-muted {
    color: #6c757d;
  }

  .embed-me-btn {
    display: inline-block;
    font-weight: 400;
    line-height: 1.5;
    color: #212529;
    text-align: center;
    text-decoration: none;
    vertical-align: middle;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    background-color: transparent;
    border: 1px solid transparent;
    padding: .375rem .75rem;
    font-size: 1rem;
    border-radius: .25rem;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    text-transform: none;
    margin: 0;
    font-family: inherit;
  }
  .embed-me-btn-secondary {
    color: #fff;
    background-color: #6c757d;
    border-color: #6c757d;
  }
  .embed-me-btn-outline-secondary {
    color: #6c757d;
    border-color: #6c757d;
  }

</style>

<button class="embed-me-code-button embed-me-btn embed-me-btn-secondary" type="button" onclick="openEmbedPopup()">Embed</button>
<div class="embed-me-code-popup" id="embed-me-code-popup">
  <div class="embed-me-background" onclick="closeEmbedPopup()"></div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Copy Embed Code</h5>
      <p class="card-text">You can embed this resource into your own website. To do so, either use the code generated by us, or use the link and tweak the rest to your preferences. Copy the respective code or link below.</p>
      <div class="input-group mb-3">
        <input type="text" class= "form-control text-muted" id ="embed-me-code" name="embed-me-code" readonly value="<%= embed_code %>">
        <button class="embed-me-btn embed-me-btn-outline-secondary" type="button" onclick="copyEmbedCode('embed-me-code')">Copy</button>
      </div>
      <div class="input-group mb-3">
        <input type="text" class= "form-control text-muted" id ="embed-me-link" name="embed-me-link" readonly value="<%= current_page_embed_url %>">
        <button class="embed-me-btn embed-me-btn-outline-secondary" type="button" onclick="copyEmbedCode('embed-me-link')">Copy</button>
      </div>
      <button type="button" class="embed-me-btn embed-me-btn-secondary" onclick="closeEmbedPopup()">Close</button>
    </div>
  </div>
</div>
